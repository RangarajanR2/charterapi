<!DOCTYPE html>
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        title Document
        script(type='text/javascript', src='https://cdn.jsdelivr.net/jquery/latest/jquery.min.js')
    script(type='text/javascript', src='https://cdn.jsdelivr.net/momentjs/latest/moment.min.js')
    script(type='text/javascript', src='https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js')
    link(rel='stylesheet', type='text/css', href='https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css')
    body
    input(type='text', name='daterange')
    textarea#json(name="json",hidden="true", cols="30", rows="10", value="#{param}")
    script.
      $(function() {
          let params = !{JSON.stringify(param)};
      $('input[name="daterange"]').daterangepicker(params, function(start, end, label) {
            window.parent.postMessage(JSON.stringify({event_code:'ym-client-event', data: JSON.stringify({
                            event: {
                                code: "dateRange",
                                data: {
                                    start: start.format('DD-MM-YYYY'),
                                    end: end.format('DD-MM-YYYY')
                                }
                            }
                        })}), 'https://chat.botplatform.io');



      console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
      });
      });

   
    
